(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6719c97a"],{"6e8d":function(t,e,i){},a859:function(t,e,i){},c1c6:function(t,e,i){"use strict";var s=i("a859"),n=i.n(s);n.a},c639:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"container",staticClass:"container"},[i("div",{staticClass:"bg"}),i("div",{staticClass:"buttons"},[i("div",{staticClass:"button",on:{click:t.prevPage}},[t._v(t._s(t.isAtTop?"上一页":"顶部"))]),i("div",{staticClass:"button",on:{click:t.toggleFullscreen}},[t._v("全屏")]),i("div",{staticClass:"button",on:{click:t.jumpToAlbum}},[t._v("跳转")]),i("div",{staticClass:"button",on:{click:t.nextPage}},[t._v(t._s(t.isAtBottom?"下一页":"底部"))])]),i("div",{staticClass:"main"},[i("h1",{staticClass:"main-title"},[t._v("BeautifulGirls")]),i("Row",t._l(t.albums,function(e){return i("i-col",{key:e,staticStyle:{"text-align":"center",margin:"30px 0"},attrs:{lg:6,md:12,sm:24,xs:24}},[i("div",{staticClass:"album"},[i("span",{staticClass:"album-index"},[t._v("#"+t._s(e))]),e>5?i("img",{attrs:{src:t.imageBaseUrl+e+"/1.jpg",onerror:"this.style.display = 'none'"},on:{click:function(i){t.showAlbumBrowser(e)}}}):t._e()])])}),1),i("h1",{staticClass:"main-title"},[t._v("BeautifulGirls")])],1),i("album-browser",{ref:"albumBrowser"})],1)},n=[],o=(i("cadf"),i("551c"),i("097d"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"browser",staticClass:"wraper",on:{touchmove:function(t){t.preventDefault()},scroll:function(t){t.preventDefault()}}},[i("img",{ref:"img",class:{"v-center":!t.realLarge},style:{maxHeight:t.realLarge?null:"100%",maxWidth:t.realLarge?null:"100%"},attrs:{src:""+t.imageBaseUrl+t.albumIndex+"/"+t.imageIndex+".jpg"},on:{load:t.imgLoaded,error:t.imgError,click:t.onImageClick,touchstart:t.onImageTouchStart,touchend:t.onImageTouchEnd,touchmove:t.onImageDragging}}),i("div",{ref:"closeBtn",staticClass:"button small-button close-btn",on:{click:t.hide}},[t._v("关闭")]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.isPlaying,expression:"isPlaying"}],staticClass:"status"},[t._v("播放中...")]),i("Row",{ref:"controlPanel",staticClass:"control-panel"},[i("i-col",{attrs:{lg:7,md:4,sm:0,xs:0}},[t._v(" ")]),i("i-col",{attrs:{lg:10,md:16,sm:24,xs:24}},[i("div",{staticClass:"control-buttons"},[i("div",{staticClass:"button small-button favorate-btn",on:{click:t.prev}},[t._v("收藏")]),i("div",{staticClass:"button small-button prev-btn",on:{click:t.prev}},[t._v("上一张")]),i("div",{staticClass:"button big-button play-btn",on:{click:t.togglePlay}},[t._v("播放")]),i("div",{staticClass:"button small-button next-btn",on:{click:t.next}},[t._v("下一张")]),i("div",{staticClass:"button small-button real-large-btn",on:{click:t.toggleRealLarge}},[t._v("1 : 1")])])]),i("i-col",{attrs:{lg:7,md:4,sm:0,xs:0}},[t._v(" ")])],1),t.loading?i("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)}),a=[],l={data:function(){return{albumIndex:32610,imageBaseUrl:"https://ii.hywly.com/a/1/",imageIndex:1,loading:!1,realLarge:!1,isPlaying:!1,playTimer:null,isImageDragging:!1,touch:{lastX:0,lastY:0,time:0},nextTimer:null}},methods:{show:function(t){this.albumIndex=t,this.imageIndex=1,this.$refs.browser.style.display="block",this.$refs.browser.style.opacity="1",window.addEventListener("keydown",this.keydownWatcher)},hide:function(){this.$refs.browser.style.display="none",this.$refs.browser.style.opacity="0",this.imageIndex=1,this.realLarge=!1,this.playTimer&&window.clearInterval(this.playTimer),this.playTimer=null,this.isPlaying=!1,window.removeEventListener("keydown",this.keydownWatcher)},next:function(){this.imageIndex++,this.loading=!0,this.realLarge=!1},prev:function(){this.imageIndex>1?(this.imageIndex--,this.loading=!0,this.realLarge=!1):this.$Message.info("已经是第一张")},toggleRealLarge:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.realLarge=!this.realLarge,this.realLarge&&setTimeout(function(){t.$refs.browser.scrollTo(e,i)})},onImageClick:function(t){var e=this;this.isPlaying&&this.togglePlay();var i=t.x,s=(t.y,t.target),n=t.offsetX,o=t.offsetY,a=this.touch.time;this.touch.time=Date.now(),this.nextTimer&&window.clearTimeout(this.nextTimer),this.nextTimer=setTimeout(function(){e.realLarge||(i>window.screen.width/2?e.next():e.prev())},500),this.touch.time-a<500&&(this.nextTimer&&(window.clearTimeout(this.nextTimer),this.nextTimer=null),this.toggleRealLarge(n/s.width*s.naturalWidth-window.screen.width/2,o/s.height*s.naturalHeight-window.screen.height/2))},onImageTouchStart:function(t){this.realLarge&&(this.isImageDragging=!0,this.touch.lastX=0,this.touch.lastY=0)},onImageTouchEnd:function(t){this.isImageDragging=!1},onImageDragging:function(t){if(this.realLarge){var e=t.touches||t.targetTouches||t.changedTouches,i=e[0].screenX,s=e[0].screenY;if(0!==this.touch.lastX||0!==this.touch.lastY){var n=i-this.touch.lastX,o=s-this.touch.lastY,a=this.$refs.browser;a.scrollBy(-n,-o)}this.touch.lastX=i,this.touch.lastY=s}},imgLoaded:function(){this.loading=!1},imgError:function(){this.$Message.error("已达相册末尾"),this.isPlaying?this.imageIndex=1:this.imageIndex--},togglePlay:function(){var t=this;this.isPlaying=!this.isPlaying,this.isPlaying?(this.playTimer=window.setInterval(this.next,3e3),setTimeout(function(){t.$refs.controlPanel.$el.style.bottom="-80px",t.$refs.closeBtn.style.top="-80px"},1e3)):(window.clearInterval(this.playTimer),this.playTimer=null,setTimeout(function(){t.$refs.controlPanel.$el.style.bottom="0px",t.$refs.closeBtn.style.top="10px"}))},keydownWatcher:function(t){var e=t.code;switch(e){case"ArrowRight":this.next();break;case"ArrowLeft":this.prev();break;case"Digit1":this.realLarge=!this.realLarge;break;case"Space":this.togglePlay();break;case"KeyC":this.hide();break;default:break}}}},r=l,c=(i("ef80"),i("f73d"),i("2877")),u=Object(c["a"])(r,o,a,!1,null,"42681cde",null);u.options.__file="AlbumBrowser.vue";var h=u.exports;function m(t,e){var i=t.scrollTop,s=e-i,n=i;requestAnimationFrame(function(){var i=Math.ceil(s/5);n+=i,t.scrollTo(0,n),s>5||s<-5?m(t,e):t.scrollTo(0,e)})}var g={components:{AlbumBrowser:h},data:function(){return{pageSize:24,startIndex:1,endIndex:24,imageBaseUrl:"https://ii.hywly.com/a/1/",fullscreen:!1,jumpToAlbumIndex:1,isAtTop:!0,isAtBottom:!1}},computed:{albums:function(){for(var t=[],e=this.startIndex;e<=this.endIndex;e++)t.push(e);return t}},mounted:function(){this.$refs.container.addEventListener("scroll",this.checkPosition)},beforeDestroy:function(){this.$refs.container.removeEventListener("scroll",this.checkPosition)},methods:{checkPosition:function(){var t=this.$refs.container;this.isAtTop=0===t.scrollTop,this.isAtBottom=t.scrollTop===t.scrollHeight-t.clientHeight},prevPage:function(){this.isAtTop?this.startIndex>this.pageSize?this.startIndex-=this.pageSize:this.startIndex=1:this.gotoTop()},nextPage:function(){this.isAtBottom?(this.endIndex+=this.pageSize,this.isAtBottom=!1):this.gotoBottom()},gotoTop:function(){m(this.$refs.container,0)},gotoBottom:function(){var t=this.$refs.container,e=t.scrollHeight-t.clientHeight;m(t,e)},jumpToAlbum:function(){var t=this;this.$Modal.confirm({title:"跳转到相册",render:function(e){return e("Input",{props:{autofocus:!0,placeholder:"输入相册数字序号"},on:{input:function(e){t.jumpToAlbumIndex=parseInt(e.trim())}}})},onOk:function(){var e=t.jumpToAlbumIndex;!isNaN(e)&&e>0&&(t.startIndex=e,t.endIndex=e+t.pageSize-1,t.gotoTop())}})},toggleFullscreen:function(){var t=document.documentElement;this.fullscreen?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullScreen?t.webkitRequestFullScreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen(),this.fullscreen=!this.fullscreen},showAlbumBrowser:function(t){this.$refs.albumBrowser.show(t)}}},d=g,f=(i("c1c6"),Object(c["a"])(d,s,n,!1,null,"4a92a27a",null));f.options.__file="index.vue";e["default"]=f.exports},d3ae:function(t,e,i){},ef80:function(t,e,i){"use strict";var s=i("d3ae"),n=i.n(s);n.a},f73d:function(t,e,i){"use strict";var s=i("6e8d"),n=i.n(s);n.a}}]);