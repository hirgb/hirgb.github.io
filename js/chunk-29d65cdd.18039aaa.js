(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29d65cdd"],{"3d35":function(t,e,s){"use strict";var i=s("9e86"),n=s.n(i);n.a},"865f":function(t,e,s){},"9e86":function(t,e,s){},b95d:function(t,e,s){"use strict";var i=s("865f"),n=s.n(i);n.a},c639:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"container",staticClass:"container"},[s("div",{staticClass:"bg"}),s("div",{staticClass:"buttons"},[s("div",{staticClass:"button",on:{click:t.toggleFullscreen}},[t._v("全屏")]),s("div",{staticClass:"button",on:{click:t.gotoTop}},[t._v("顶部")]),s("div",{staticClass:"button",on:{click:t.jumpToAlbum}},[t._v("跳转")]),s("div",{staticClass:"button",on:{click:t.restorePage}},[t._v("恢复")])]),s("div",{staticClass:"main"},[s("h1",{staticClass:"main-title"},[t._v("BeautifulGirls")]),s("Row",t._l(t.albums,function(e){return s("i-col",{key:e,staticStyle:{"text-align":"center",margin:"30px 0"},attrs:{lg:6,md:12,sm:24,xs:24}},[s("div",{staticClass:"album"},[s("span",{staticClass:"album-index"},[t._v("#"+t._s(e))]),e>5?s("img",{attrs:{src:t.imageBaseUrl+e+"/1.jpg",onerror:"this.style.display = 'none'"},on:{click:function(s){t.showAlbumBrowser(e)}}}):t._e()])])}),1)],1),s("div",{staticClass:"loader",on:{click:t.nextPage}},[t._v("Page "+t._s(t.page)+" - Load More")]),s("album-browser",{ref:"albumBrowser"})],1)},n=[],a=(s("cadf"),s("551c"),s("097d"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"browser",staticClass:"wraper",on:{touchmove:function(t){t.preventDefault()},scroll:function(t){t.preventDefault()}}},[s("img",{ref:"img",class:{"v-center":!t.realLarge},style:{maxHeight:t.realLarge?null:"100%",maxWidth:t.realLarge?null:"100%"},attrs:{src:""+t.imageBaseUrl+t.albumIndex+"/"+t.imageIndex+".jpg"},on:{load:t.imgLoaded,error:t.imgError,click:t.onImageClick,touchstart:t.onImageTouchStart,touchend:t.onImageTouchEnd,touchmove:t.onImageDragging}}),s("div",{ref:"closeBtn",staticClass:"button small-button close-btn",on:{click:t.hide}},[t._v("关闭")]),s("span",{directives:[{name:"show",rawName:"v-show",value:t.isPlaying,expression:"isPlaying"}],staticClass:"status"},[t._v("播放中...")]),s("Row",{ref:"controlPanel",staticClass:"control-panel"},[s("i-col",{attrs:{lg:7,md:4,sm:0,xs:0}},[t._v(" ")]),s("i-col",{attrs:{lg:10,md:16,sm:24,xs:24}},[s("div",{staticClass:"control-buttons"},[s("div",{staticClass:"button small-button favorate-btn",on:{click:t.prev}},[t._v("收藏")]),s("div",{staticClass:"button small-button prev-btn",on:{click:t.prev}},[t._v("上一张")]),s("div",{staticClass:"button big-button play-btn",on:{click:t.togglePlay}},[t._v("播放")]),s("div",{staticClass:"button small-button next-btn",on:{click:t.next}},[t._v("下一张")]),s("div",{staticClass:"button small-button real-large-btn",on:{click:t.toggleRealLarge}},[t._v("1 : 1")])])]),s("i-col",{attrs:{lg:7,md:4,sm:0,xs:0}},[t._v(" ")])],1),t.loading?s("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)}),o=[],l={data:function(){return{albumIndex:32610,imageBaseUrl:"https://ii.hywly.com/a/1/",imageIndex:1,loading:!1,realLarge:!1,isPlaying:!1,playTimer:null,isImageDragging:!1,touch:{lastX:0,lastY:0,time:0},nextTimer:null}},methods:{show:function(t){this.albumIndex=t,this.imageIndex=1,this.$refs.browser.style.display="block",this.$refs.browser.style.opacity="1",window.addEventListener("keydown",this.keydownWatcher)},hide:function(){this.$refs.browser.style.display="none",this.$refs.browser.style.opacity="0",this.imageIndex=1,this.realLarge=!1,this.playTimer&&window.clearInterval(this.playTimer),this.playTimer=null,this.isPlaying=!1,window.removeEventListener("keydown",this.keydownWatcher)},next:function(){this.imageIndex++,this.loading=!0,this.realLarge=!1},prev:function(){this.imageIndex>1?(this.imageIndex--,this.loading=!0,this.realLarge=!1):this.$Message.info("已经是第一张")},toggleRealLarge:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.realLarge=!this.realLarge,this.realLarge&&setTimeout(function(){t.$refs.browser.scrollTo(e,s)})},onImageClick:function(t){var e=this;this.isPlaying&&this.togglePlay();var s=t.x,i=(t.y,t.target),n=t.offsetX,a=t.offsetY,o=this.touch.time;this.touch.time=Date.now(),this.nextTimer&&window.clearTimeout(this.nextTimer),this.nextTimer=setTimeout(function(){s>window.screen.width/2?e.next():e.prev()},500),this.touch.time-o<500&&(this.nextTimer&&(window.clearTimeout(this.nextTimer),this.nextTimer=null),this.toggleRealLarge(n/i.width*i.naturalWidth-window.screen.width/2,a/i.height*i.naturalHeight-window.screen.height/2))},onImageTouchStart:function(t){this.realLarge&&(this.isImageDragging=!0,this.touch.lastX=0,this.touch.lastY=0)},onImageTouchEnd:function(t){this.isImageDragging=!1},onImageDragging:function(t){if(this.realLarge){var e=t.touches||t.targetTouches||t.changedTouches,s=e[0].screenX,i=e[0].screenY;if(0!==this.touch.lastX||0!==this.touch.lastY){var n=s-this.touch.lastX,a=i-this.touch.lastY,o=this.$refs.browser;o.scrollBy(-n,-a)}this.touch.lastX=s,this.touch.lastY=i}},imgLoaded:function(){this.loading=!1},imgError:function(){this.$Message.error("已达相册末尾"),this.isPlaying?this.imageIndex=1:this.imageIndex--},togglePlay:function(){var t=this;this.isPlaying=!this.isPlaying,this.isPlaying?(this.playTimer=window.setInterval(this.next,3e3),setTimeout(function(){t.$refs.controlPanel.$el.style.bottom="-80px",t.$refs.closeBtn.style.top="-80px"},1e3)):(window.clearInterval(this.playTimer),this.playTimer=null,setTimeout(function(){t.$refs.controlPanel.$el.style.bottom="0px",t.$refs.closeBtn.style.top="10px"}))},keydownWatcher:function(t){var e=t.code;switch(e){case"ArrowRight":this.next();break;case"ArrowLeft":this.prev();break;case"Digit1":this.realLarge=!this.realLarge;break;case"Space":this.togglePlay();break;case"KeyC":this.hide();break;default:break}}}},r=l,c=(s("ef80"),s("b95d"),s("2877")),u=Object(c["a"])(r,a,o,!1,null,"cbff820e",null);u.options.__file="AlbumBrowser.vue";var h=u.exports,m={components:{AlbumBrowser:h},data:function(){return{page:0,albums:[],imageBaseUrl:"https://ii.hywly.com/a/1/",fullscreen:!1,restore:{page:0},mode:"browse",isInitial:!0,jumpToAlbumIndex:1,jumpStartIndex:1}},watch:{page:function(t){var e;"browse"===this.mode?e=1:"jump"===this.mode&&this.isInitial?(e=24*(t-1)+1,this.jumpStartIndex=e):"jump"!==this.mode||this.isInitial||(e=this.jumpStartIndex);for(var s=24*(t-1)+24,i=[],n=e;n<=s;n++)i.push(n);this.albums=i}},mounted:function(){this.page=1},methods:{nextPage:function(){this.isInitial=!1,this.page++},gotoTop:function(){this.$refs.container.scrollTo(0,0)},jumpToAlbum:function(){var t=this;this.$Modal.confirm({title:"跳转到相册",render:function(e){return e("Input",{props:{autofocus:!0,placeholder:"输入相册数字序号"},on:{input:function(e){t.jumpToAlbumIndex=parseInt(e.trim())}}})},onOk:function(){var e=t.jumpToAlbumIndex;if(!isNaN(e)&&e>0){"browse"===t.mode&&(t.restore.page=t.page),t.mode="jump",t.isInitial=!0;var s=Math.ceil(e/24);t.startIndex=24*(s-1)+1,t.page=s,t.gotoTop()}}})},restorePage:function(){"jump"===this.mode&&(this.mode="browse",this.isInitial=!0,this.page=this.restore.page)},toggleFullscreen:function(){var t=document.documentElement;this.fullscreen?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullScreen?t.webkitRequestFullScreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen(),this.fullscreen=!this.fullscreen},showAlbumBrowser:function(t){this.$refs.albumBrowser.show(t)}}},g=m,d=(s("3d35"),Object(c["a"])(g,i,n,!1,null,"6843ff36",null));d.options.__file="index.vue";e["default"]=d.exports},d3ae:function(t,e,s){},ef80:function(t,e,s){"use strict";var i=s("d3ae"),n=s.n(i);n.a}}]);